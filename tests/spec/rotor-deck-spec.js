// Generated by CoffeeScript 1.6.2
(function() {
  describe("rotor deck. setup - reflector A, rotor right - III, rotor middle - II, rotor left - I, initial position: AAA", function() {
    var reflector, rotorDeck, rotorLeft, rotorMiddle, rotorRight;

    reflector = null;
    rotorRight = null;
    rotorMiddle = null;
    rotorLeft = null;
    rotorDeck = null;
    beforeEach(function() {
      reflector = new Reflector(KnownReflectors.A);
      rotorRight = new Rotor(KnownRotors.III);
      rotorRight.setPosition("A");
      rotorMiddle = new Rotor(KnownRotors.II);
      rotorMiddle.setPosition("A");
      rotorLeft = new Rotor(KnownRotors.I);
      rotorLeft.setPosition("A");
      return rotorDeck = new RotorDeck(reflector, rotorLeft, rotorMiddle, rotorRight);
    });
    it('should return I, if A is passed', function() {
      var result;

      result = rotorDeck.encrypt("A");
      return expect(result).toBe("I");
    });
    it('should return A, if I is passed', function() {
      var result;

      result = rotorDeck.encrypt("I");
      return expect(result).toBe("A");
    });
    it('should return B, if F is passed', function() {
      var result;

      result = rotorDeck.encrypt("F");
      return expect(result).toBe("B");
    });
    return it('should return F, if B is passed', function() {
      var result;

      result = rotorDeck.encrypt("B");
      return expect(result).toBe("F");
    });
  });

  describe("rotor deck. setup - reflector A, rotor right - III, rotor middle - II, rotor left - I, initial position: AAB", function() {
    var reflector, rotorDeck, rotorLeft, rotorMiddle, rotorRight;

    reflector = null;
    rotorRight = null;
    rotorMiddle = null;
    rotorLeft = null;
    rotorDeck = null;
    beforeEach(function() {
      reflector = new Reflector(KnownReflectors.A);
      rotorRight = new Rotor(KnownRotors.III);
      rotorRight.setPosition("B");
      rotorMiddle = new Rotor(KnownRotors.II);
      rotorMiddle.setPosition("A");
      rotorLeft = new Rotor(KnownRotors.I);
      rotorLeft.setPosition("A");
      return rotorDeck = new RotorDeck(reflector, rotorLeft, rotorMiddle, rotorRight);
    });
    it('should return E, if A is passed', function() {
      var result;

      result = rotorDeck.encrypt("A");
      return expect(result).toBe("E");
    });
    return it('should return R, if B is passed', function() {
      var result;

      result = rotorDeck.encrypt("B");
      return expect(result).toBe("R");
    });
  });

  describe("RotorDeck::advanceRotors()", function() {
    var reflector, rotorDeck, rotorLeft, rotorMiddle, rotorRight;

    reflector = null;
    rotorRight = null;
    rotorMiddle = null;
    rotorLeft = null;
    rotorDeck = null;
    beforeEach(function() {
      reflector = new Reflector(KnownReflectors.A);
      rotorRight = new Rotor(KnownRotors.III, true);
      rotorRight.setPosition("A");
      rotorMiddle = new Rotor(KnownRotors.II, true);
      rotorMiddle.setPosition("A");
      rotorLeft = new Rotor(KnownRotors.I, true);
      rotorLeft.setPosition("A");
      return rotorDeck = new RotorDeck(reflector, rotorLeft, rotorMiddle, rotorRight);
    });
    it('should turn from AAA to AAB', function() {
      var result;

      rotorDeck.advanceRotors();
      result = rotorDeck.rotorLeft.getPosition() + rotorDeck.rotorMiddle.getPosition() + rotorDeck.rotorRight.getPosition();
      return expect(result).toBe("AAB");
    });
    it('should turn from AAB to  AAC', function() {
      var result;

      rotorDeck.rotorRight.setPosition("B");
      rotorDeck.advanceRotors();
      result = rotorDeck.rotorLeft.getPosition() + rotorDeck.rotorMiddle.getPosition() + rotorDeck.rotorRight.getPosition();
      return expect(result).toBe("AAC");
    });
    return it('should turn from AAV to ABW', function() {
      var result;

      rotorDeck.rotorLeft.setPosition("A");
      rotorDeck.rotorMiddle.setPosition("A");
      rotorDeck.rotorRight.setPosition("V");
      rotorDeck.advanceRotors();
      result = rotorDeck.rotorLeft.getPosition() + rotorDeck.rotorMiddle.getPosition() + rotorDeck.rotorRight.getPosition();
      return expect(result).toBe("ABW");
    });
  });

  describe("rotor deck. encrypting: achtung", function() {
    var reflector, rotorDeck, rotorLeft, rotorMiddle, rotorRight;

    reflector = null;
    rotorRight = null;
    rotorMiddle = null;
    rotorLeft = null;
    rotorDeck = null;
    beforeEach(function() {
      reflector = new Reflector(KnownReflectors.A, true);
      rotorRight = new Rotor(KnownRotors.III, true);
      rotorMiddle = new Rotor(KnownRotors.II, true);
      rotorLeft = new Rotor(KnownRotors.I, true);
      return rotorDeck = new RotorDeck(reflector, rotorLeft, rotorMiddle, rotorRight);
    });
    it('encrypt/decrypt: ACHTUNG', function() {
      var char, decryptedText, encrypt, encryptedText, word, _i, _j, _len, _len1, _ref, _ref1;

      word = "ACHTUNG";
      encrypt = function(char) {
        var result;

        result = rotorDeck.encrypt(char);
        console.log(("" + char + " -> " + result + " | ") + rotorDeck.rotorLeft.getPosition() + rotorDeck.rotorMiddle.getPosition() + rotorDeck.rotorRight.getPosition());
        rotorDeck.advanceRotors();
        return result;
      };
      console.log("============= Encrypt " + word + " ===============");
      rotorRight.setPosition("A");
      rotorMiddle.setPosition("A");
      rotorLeft.setPosition("A");
      encryptedText = '';
      _ref = word.split('');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        char = _ref[_i];
        encryptedText += encrypt(char);
      }
      console.log("============= Decrypt " + word + " (scrambled) ===============");
      rotorRight.setPosition("A");
      rotorMiddle.setPosition("A");
      rotorLeft.setPosition("A");
      decryptedText = '';
      _ref1 = encryptedText.split('');
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        char = _ref1[_j];
        decryptedText += encrypt(char);
      }
      return expect(decryptedText).toBe(word);
    });
    it('encrypt/decrypt with right rotor turnover: ACHTUNG', function() {
      var char, decryptedText, encrypt, encryptedText, word, _i, _j, _len, _len1, _ref, _ref1;

      word = "ACHTUNG";
      encrypt = function(char) {
        var result;

        result = rotorDeck.encrypt(char);
        console.log(("" + char + " -> " + result + " | ") + rotorDeck.rotorLeft.getPosition() + rotorDeck.rotorMiddle.getPosition() + rotorDeck.rotorRight.getPosition());
        rotorDeck.advanceRotors();
        return result;
      };
      console.log("============= Encrypt " + word + " ===============");
      rotorRight.setPosition("T");
      rotorMiddle.setPosition("A");
      rotorLeft.setPosition("A");
      encryptedText = '';
      _ref = word.split('');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        char = _ref[_i];
        encryptedText += encrypt(char);
      }
      console.log("============= Decrypt " + word + " (scrambled) ===============");
      rotorRight.setPosition("T");
      rotorMiddle.setPosition("A");
      rotorLeft.setPosition("A");
      decryptedText = '';
      _ref1 = encryptedText.split('');
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        char = _ref1[_j];
        decryptedText += encrypt(char);
      }
      return expect(decryptedText).toBe(word);
    });
    return it('encrypt/decrypt with right rotor turnover: ACHTUNG', function() {
      var char, decryptedText, encrypt, encryptedText, word, _i, _j, _len, _len1, _ref, _ref1;

      word = "ACHTUNG";
      encrypt = function(char) {
        var result;

        result = rotorDeck.encrypt(char);
        console.log(("" + char + " -> " + result + " | ") + rotorDeck.rotorLeft.getPosition() + rotorDeck.rotorMiddle.getPosition() + rotorDeck.rotorRight.getPosition());
        rotorDeck.advanceRotors();
        return result;
      };
      console.log("============= Encrypt " + word + " ===============");
      rotorRight.setPosition("T");
      rotorMiddle.setPosition("D");
      rotorLeft.setPosition("A");
      encryptedText = '';
      _ref = word.split('');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        char = _ref[_i];
        encryptedText += encrypt(char);
      }
      console.log("============= Decrypt " + word + " (scrambled) ===============");
      rotorRight.setPosition("T");
      rotorMiddle.setPosition("D");
      rotorLeft.setPosition("A");
      decryptedText = '';
      _ref1 = encryptedText.split('');
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        char = _ref1[_j];
        decryptedText += encrypt(char);
      }
      return expect(decryptedText).toBe(word);
    });
  });

}).call(this);
